{"ast":null,"code":"import { DECREASE, INCREASE, CLEAR_CART, REMOVE, GET_TOTALS, TOGGLE_AMOUNT } from '../action'; // items\n\nimport cartItems from \"./cart-items\"; //initial store\n\nconst initialStore = {\n  cart: cartItems,\n  total: 0,\n  amount: 0\n};\n\nconst reducer = (state = initialStore, action) => {\n  switch (action.type) {\n    case DECREASE:\n      let tempCart1 = [];\n\n      if (action.payload.amount === 1) {\n        tempCart1 = state.cart.filter(cartItem => cartItem.id !== action.payload.id);\n      } else {\n        tempCart1 = state.cart.map(cartItem => {\n          if (cartItem.id === action.payload.id) {\n            cartItem = { ...cartItem,\n              amount: cartItem.amount - 1\n            };\n          }\n\n          return cartItem;\n        });\n      }\n\n      return { ...state,\n        cart: tempCart1\n      };\n\n    case INCREASE:\n      let tempCart = state.cart.map(cartItem => {\n        if (cartItem.id === action.payload.id) {\n          cartItem = { ...cartItem,\n            amount: cartItem.amount + 1\n          };\n        }\n\n        return cartItem;\n      });\n      return { ...state,\n        cart: tempCart\n      };\n\n    case CLEAR_CART:\n      return { ...state,\n        cart: []\n      };\n\n    case REMOVE:\n      return { ...state,\n        cart: state.cart.filter(cartItem => cartItem.id !== action.payload.id)\n      };\n\n    case GET_TOTALS:\n      let {\n        total,\n        amount\n      } = state.cart.reduce((cartTotal, cartItem) => {\n        const {\n          price,\n          amount\n        } = cartItem;\n        const itemTotal = price * amount;\n        cartTotal.total += itemTotal;\n        cartTotal.amount += amount;\n        return cartTotal;\n      }, {\n        total: 0,\n        amount: 0\n      });\n      total = parseFloat(total.toFixed(2));\n      return { ...state,\n        total,\n        amount\n      };\n\n    case TOGGLE_AMOUNT:\n      return { ...state,\n        cart: state.cart.map(cartItem => {\n          if (cartItem.id === action.payload.id) {\n            if (action.payload.toggle === 'inc') {\n              return cartItem = { ...cartItem,\n                amount: cartItem.amount + 1\n              };\n            } else if (action.payload.toggle === 'dec') {\n              return cartItem = { ...cartItem,\n                amount: cartItem.amount - 1\n              };\n            }\n          }\n\n          return cartItem;\n        })\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/home/rilex/redux-cart/src/reducers/reducer.js"],"names":["DECREASE","INCREASE","CLEAR_CART","REMOVE","GET_TOTALS","TOGGLE_AMOUNT","cartItems","initialStore","cart","total","amount","reducer","state","action","type","tempCart1","payload","filter","cartItem","id","map","tempCart","reduce","cartTotal","price","itemTotal","parseFloat","toFixed","toggle"],"mappings":"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","sourcesContent":["import { \n    DECREASE, \n    INCREASE, \n    CLEAR_CART, \n    REMOVE, \n    GET_TOTALS,\n    TOGGLE_AMOUNT\n} from '../action'\n// items\nimport cartItems from \"./cart-items\";\n\n//initial store\nconst initialStore = {\n    cart: cartItems,\n    total: 0,\n    amount: 0\n  }\n\nconst reducer = ( state = initialStore, action) => {\n    switch(action.type){\n        case DECREASE:\n            let tempCart1 = [];\n            if(action.payload.amount === 1){\n                tempCart1 = state.cart.filter((cartItem) => cartItem.id !== action.payload.id)           \n            } \n                else {\n                tempCart1 = state.cart.map((cartItem) => {\n                    if(cartItem.id === action.payload.id){\n                        cartItem = {...cartItem, amount: cartItem.amount - 1}\n                    }\n                    return cartItem\n                })\n            }\n            return {...state, cart: tempCart1 }\n        case INCREASE:\n            let tempCart = state.cart.map((cartItem) => {\n                if(cartItem.id === action.payload.id){\n                    cartItem = {...cartItem, amount: cartItem.amount + 1}\n                }\n                return cartItem\n            })\n            return {...state, cart: tempCart}\n        case CLEAR_CART:\n            return {...state, cart: []}\n        case REMOVE:\n            return {...state, cart: state.cart.filter((cartItem) => cartItem.id !== action.payload.id)}\n        case GET_TOTALS: \n            let { total, amount } = state.cart.reduce((cartTotal, cartItem) => {\n                const { price, amount} = cartItem;\n                const itemTotal = price * amount\n\n                cartTotal.total += itemTotal\n\n                cartTotal.amount += amount;\n                return cartTotal\n            },{\n                total: 0,\n                amount: 0\n            });\n            total = parseFloat(total.toFixed(2))\n            return {...state, total, amount}\n        case TOGGLE_AMOUNT:\n            return {...state, cart: state.cart.map(cartItem => {\n                if(cartItem.id === action.payload.id){\n                    if(action.payload.toggle === 'inc'){\n                        return cartItem = {...cartItem, amount: cartItem.amount + 1}\n                    } else if(action.payload.toggle === 'dec'){\n                        return cartItem = {...cartItem, amount: cartItem.amount - 1}\n                    }\n                }\n                return cartItem\n            })}\n        default:\n            return state\n    }\n}\n\nexport default reducer"]},"metadata":{},"sourceType":"module"}